ngApp.controller("myCtrl",["$scope","$timeout","$http","$location","$state","$window",function(e,s,t,r,o,a){e.rootURL="http://192.168.1.135:8000/crud/",e.imageURL="http://192.168.1.135/myFirstNodeJs/uploads/",e.mainLoaderIs=!0,e.allMembersList=[],e.selMembersList=[],e.unSelMembersList=[],e.createdGroupList=[],e.checkRandomNo=[],e.membersCount=5,e.groupsCount=1,e.goBackFun=function(){a.history.back()},e.randomNoCreator=function(){for(var s=e.checkRandomNo,t=s.length;t--;){var r=s.splice(Math.floor(Math.random()*(t+1)),1)[0];return r}},e.autoCreateGroup=function(){for(var s=0;s<e.selMembersList.length;s++)e.checkRandomNo.push(s);for(var t=0;t<e.groupsCount;t++){for(var r=[],o=0;o<e.membersCount;o++){var a=0;if(!(r.length<e.membersCount))break;a=e.randomNoCreator(),r.push(e.selMembersList[a])}e.createdGroupList.push(r)}},e.reloadFun=function(s){"onload"==s?(e.mainLoaderIs=!0,e.createdGroupList=[],e.checkRandomNo=[],e.membersInGroup=[],e.selMembersList=[],t({method:"GET",url:e.rootURL+"getEmpList",headers:{"Content-Type":"application/json"}}).then(function(s){if(console.log("response",s),s.data.success){var t=s.data.data;for(let s=0;s<t.length;s++)""!=t[s].image&&(t[s].image=e.imageURL+t[s].image),1==t[s].status&&e.selMembersList.push(t[s]),e.allMembersList.push(t[s]);e.autoCreateGroup()}else alert("Error :"+s.data.message);e.mainLoaderIs=!1})):(e.createdGroupList=[],e.checkRandomNo=[],e.membersInGroup=[],e.autoCreateGroup())},e.memrsListViewOpenIs=!1,e.addMembersFromAll=function(){if(e.memrsListViewOpenIs)e.memrsListViewOpenIs=!1;else{e.unSelMembersList=[];for(var s=e.selMembersList.length-1,t=0;t<e.allMembersList.length;t++)if(e.selMembersList.length>0)for(var r=0;r<e.selMembersList.length&&e.allMembersList[t].id!=e.selMembersList[r].id;r++)r==s&&e.unSelMembersList.push(e.allMembersList[t]);else e.unSelMembersList.push(e.allMembersList[t]);e.memrsListViewOpenIs=!0}},e.removeFromSelList=function(s,r){var o={status:0,emp_id:0};"selList"==s&&(o.emp_id=r.id,e.unSelMembersList.push(r),e.selMembersList.splice(e.selMembersList.indexOf(r),1),o.status=0),"allList"==s&&(o.emp_id=r.id,e.selMembersList.push(r),e.unSelMembersList.splice(e.unSelMembersList.indexOf(r),1),o.status=1),"clearAll"==s&&(o.status="all",e.selMembersList=angular.copy(e.allMembersList),e.unSelMembersList=[],e.memrsListViewOpenIs=!1),t({method:"POST",url:e.rootURL+"changeEmpStatus",headers:{"Content-Type":"application/json"},data:o}).then(function(e){console.log("response",e),e.data.success?console.log(e.data.message):alert("Error :"+e.data.message)})},e.goMembersListPage=function(){o.go("memberList")},s(function(){e.mainLoaderIs=!1},1e3)}]);