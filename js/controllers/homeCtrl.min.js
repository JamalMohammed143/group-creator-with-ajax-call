ngApp.controller("homeCtrl",["$scope","$rootScope","$timeout","$http","$location","$state","$window",function($scope,$rootScope,$timeout,$http,$location,$state,$window){$scope.rootURL="http://192.168.1.135:8000/crud/",$scope.imageURL="http://192.168.1.135/group-creator-backend/uploads/",$scope.mainLoaderIs=!0,$scope.allMembersList=[],$scope.selMembersList=[],$scope.unSelMembersList=[],$scope.createdGroupList=[],$scope.checkRandomNo=[],$scope.membersCount=5,$scope.groupsCount=1,$scope.goBackFun=function(){$window.history.back()},$scope.randomNoCreator=function(){for(var a=$scope.checkRandomNo,i=a.length;i--;){var random;return a.splice(Math.floor(Math.random()*(i+1)),1)[0]}},$scope.autoCreateGroup=function(){for(var r=0;r<$scope.selMembersList.length;r++)$scope.checkRandomNo.push(r);for(var g=0;g<$scope.groupsCount;g++){for(var group=[],i=0;i<$scope.membersCount;i++){var getIndex=0;if(!(group.length<$scope.membersCount))break;getIndex=$scope.randomNoCreator(),group.push($scope.selMembersList[getIndex])}$scope.createdGroupList.push(group)}},$scope.reloadFun=function(params){"onload"==params?($scope.createdGroupList=[],$scope.checkRandomNo=[],$scope.membersInGroup=[],$scope.selMembersList=[],$http({method:"GET",url:$scope.rootURL+"getEmpList",headers:{"Content-Type":"application/json"}}).then(function(response){if(console.log("response",response),response.data.success){var dataList=response.data.data;for(let l=0;l<dataList.length;l++)""!=dataList[l].image&&null!=dataList[l].image&&(dataList[l].imageFullPath=$scope.imageURL+dataList[l].image),1==dataList[l].status&&$scope.selMembersList.push(dataList[l]),$scope.allMembersList.push(dataList[l]);$scope.autoCreateGroup(),$scope.getPrevGroupList()}else alert("Error :"+response.data.message)})):($scope.createdGroupList=[],$scope.checkRandomNo=[],$scope.membersInGroup=[],$scope.autoCreateGroup())},$scope.getPrevGroupList=function(){$scope.unSelMembersList=[];for(var loopLength=$scope.selMembersList.length-1,i=0;i<$scope.allMembersList.length;i++)if($scope.selMembersList.length>0)for(var g=0;g<$scope.selMembersList.length&&$scope.allMembersList[i].id!=$scope.selMembersList[g].id;g++)g==loopLength&&$scope.unSelMembersList.push($scope.allMembersList[i]);else $scope.unSelMembersList.push($scope.allMembersList[i])},$scope.memrsListViewOpenIs=!1,$scope.prevListToggleNav=function(){$scope.memrsListViewOpenIs=!$scope.memrsListViewOpenIs},$scope.removeFromSelList=function(fromList,getIndexObj){var postData={status:0,emp_id:0};"selList"==fromList&&(postData.emp_id=getIndexObj.id,$scope.unSelMembersList.push(getIndexObj),$scope.selMembersList.splice($scope.selMembersList.indexOf(getIndexObj),1),postData.status=0),"allList"==fromList&&(postData.emp_id=getIndexObj.id,$scope.selMembersList.push(getIndexObj),$scope.unSelMembersList.splice($scope.unSelMembersList.indexOf(getIndexObj),1),postData.status=1),"clearAll"==fromList&&(postData.status="all",$scope.selMembersList=angular.copy($scope.allMembersList),$scope.unSelMembersList=[],$scope.memrsListViewOpenIs=!1),$http({method:"POST",url:$scope.rootURL+"changeEmpStatus",headers:{"Content-Type":"application/json"},data:postData}).then(function(response){console.log("response",response),response.data.success?console.log(response.data.message):alert("Error :"+response.data.message)})},$scope.goMembersListPage=function(){$state.go("memberList")},$timeout(function(){$scope.mainLoaderIs=!1},1e3)}]);